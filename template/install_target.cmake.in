# --------------------------------------------------------------------------------------------------------------
# This file is automatically generated by aoe cmake kit.
# --------------------------------------------------------------------------------------------------------------
# 用于生成工程内指定库目标的 cmake_install.cmake 的模板文件
# --------------------------------------------------------------------------------------------------------------
# 将使用的模板变量：
#
# PROJECT_NAME: 工程名称；
#
# target: 目标的名称；
#
# target_dependencies: 该目标依赖的工程内其他目标；
#
# target_third_parties: 该目标依赖的第三方库；
#
# target_third_parties_components: 依赖的第三方库的组件细节（使用第三方库名称隔开）；
# --------------------------------------------------------------------------------------------------------------

include(CMakeFindDependencyMacro)

# -------------------------------------------------------------
## 加载工程内其他的目标依赖

set(_@PROJECT_NAME@_@target@_dependencies @target_dependencies@)

foreach(depend ${_@PROJECT_NAME@_@target@_dependencies})
    find_dependency(${depend})
endforeach()

# -------------------------------------------------------------
## 引入第三方库

# 解析第三方库依赖的组件
cmake_parse_arguments(_@PROJECT_NAME@_@target@_config "" "" "@target_third_parties@" "@target_third_parties_components@")

# 加载第三方库依赖
set(_@PROJECT_NAME@_@target@_third_parties @target_third_parties@)

foreach(third_party ${_@PROJECT_NAME@_@target@_third_parties})
    find_dependency(${third_party} REQUIRED COMPONENTS ${_@PROJECT_NAME@_@target@_config_${third_party}})
    unset(_@PROJECT_NAME@_@target@_config_${third_party})
endforeach()

# -------------------------------------------------------------
## 调用自定义的前处理 cmake 文件

file(GLOB _@PROJECT_NAME@_@target@_prefix_cmake_files
    ${CMAKE_CURRENT_LIST_DIR}/extra/@target@/prefix/*.cmake)

foreach(cmake_file ${_@PROJECT_NAME@_@target@_prefix_cmake_files})
    include(${cmake_file})
endforeach()

# -------------------------------------------------------------
## 添加本目标的 targets 文件，以定义该目标

include("${CMAKE_CURRENT_LIST_DIR}/@target@Targets.cmake")

# -------------------------------------------------------------
## 调用自定义的后处理 cmake 文件

file(GLOB _@PROJECT_NAME@_@target@_pose_cmake_files
    ${CMAKE_CURRENT_LIST_DIR}/extra/@target@/post/*.cmake)

foreach(cmake_file ${_@PROJECT_NAME@_@target@_pose_cmake_files})
    include(${cmake_file})
endforeach()

# -------------------------------------------------------------
## 清除临时变量
unset(_@PROJECT_NAME@_@target@_dependencies)
unset(_@PROJECT_NAME@_@target@_third_parties)
unset(_@PROJECT_NAME@_@target@_prefix_cmake_files)
unset(_@PROJECT_NAME@_@target@_pose_cmake_files)
